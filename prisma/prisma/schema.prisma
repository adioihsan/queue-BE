// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//models

model User{
  id                    Int                   @id @default(autoincrement())
  email             String              @unique
  username     String?
  password      String?
  role                Role                @default(OWNER)
  profile           Profile?
  queue_desk  QueueDesk[] 
  createdAt      DateTime       @default(now())
  updatedAt     DateTime       @default(now())

}

model Profile{
  id                   Int                      @id     @default(autoincrement())
  business      String 
  address       String
  user              User                  @relation(fields: [userId], references: [id])
  userId            Int                   @unique
  createdAt      DateTime       @default(now())
  updatedAt     DateTime       @default(now()) 
}

model QueueDesk{
  id                        Int             @id     @default(autoincrement())
  desk_name       String
  user                    User           @relation(fields: [userId], references: [id])
  userId                Int             
  unique_url        String      @unique
  queue_list         QueueList[]
}

model QueueList{
  id                          Int                     @id     @default(autoincrement())
  queue_code        Int
  order_number   Int 
  note                     String
  queuedesk        QueueDesk    @relation(fields: [deskId], references: [id])
  deskId                 Int
  enrollAt             DateTime        @default(now())
  checkinAt          DateTime
}


enum Role {
  CUSTOMER
  OWNER
}